<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tree | Order By Root</title>
    <script src="../../lib/dist/runtime.js" data-tang-debug></script>
</head>

<body>
    <script>
        /* 本测试主要测试如下 */
        /*
         * 1. 从语句块的可用性；
         * 2. 使用arr.Tree类对文本进行编码和解码；
         */

        tang.init().block(['$_/arr/Tree'], function(pandora, root, imports, undefined) {

            var
                list = [{
                    id: 1,
                    parent: 0,
                    text: 'A 顶级文本'
                }, {
                    id: 2,
                    parent: 0,
                    text: 'B 顶级文本'
                }, {
                    id: 3,
                    parent: 0,
                    text: 'C 顶级文本'
                }, {
                    id: 4,
                    parent: 1,
                    text: 'D 二级文本 rt A'
                }, {
                    id: 5,
                    parent: 1,
                    text: 'E 二级文本 rt A'
                }, {
                    id: 6,
                    parent: 1,
                    text: 'F 二级文本 rt A'
                }, {
                    id: 7,
                    parent: 2,
                    text: 'G 二级文本 rt B'
                }, {
                    id: 8,
                    parent: 2,
                    text: 'H 二级文本 rt B'
                }, {
                    id: 9,
                    parent: 2,
                    text: 'J 二级文本 rt B'
                }, {
                    id: 10,
                    parent: 3,
                    text: 'K 二级文本 rt C'
                }, {
                    id: 11,
                    parent: 3,
                    text: 'L 二级文本 rt C'
                }, {
                    id: 12,
                    parent: 3,
                    text: 'M 二级文本 rt C'
                }, {
                    id: 13,
                    parent: 4,
                    text: 'N 三级文本 rt D'
                }, {
                    id: 14,
                    parent: 4,
                    text: 'O 三级文本 rt D'
                }, {
                    id: 15,
                    parent: 4,
                    text: 'P 三级文本 rt D'
                }, {
                    id: 16,
                    parent: 5,
                    text: 'Q 三级文本 rt E'
                }, {
                    id: 17,
                    parent: 5,
                    text: 'R 三级文本 rt E'
                }, {
                    id: 18,
                    parent: 5,
                    text: 'S 三级文本 rt E'
                }, {
                    id: 19,
                    parent: 13,
                    text: 'T 四级文本 rt N'
                }, {
                    id: 20,
                    parent: 13,
                    text: 'U 四级文本 rt N'
                }],
                tree = new pandora.arr.Tree(list, 'id', 'parent', 'level'),
                view = pandora.render({
                    margin: "10px auto 0",
                    textAlign: "left",
                    fontSize: "14px"
                }),
                result = tree.getAllOrderByRoot(0, 1).result,
                html = '';
                console.log(result);
            pandora.each(result, function(i, div) {
                html += '<div>|-&nbsp;';
                for (var i = 1; i < div.level; i++) {
                    html += '&nbsp;&nbsp;';
                }
                html += div.text;
                html += '</div>';
            });
            app.innerHTML = html;
        }, true);
    </script>
</body>

</html>